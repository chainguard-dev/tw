name: symlink-check

needs:
  packages:
    - apk-tools
    - symlink-check

inputs:
  paths:
    description: |
      The paths to check for broken symlinks.
    required: false
    default: "/"
  packages:
    description: |
      Check all symlinks in these installed packages.
      Use "none" to disable the default package check.
    required: false
    default: "${{context.name}}"

pipeline:
  - name: "check for broken/dangling symlinks"
    runs: |
      symlink-check \
          --paths="${{inputs.paths}}" \
          --packages="${{inputs.packages}}"
